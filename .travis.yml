language: minimal

services:
    - docker

env:
    - REPO="donnellans/jupyter-r-arm64" CONTAINER="r-arm"

before_install:
    - sudo apt-get update && sudo apt-get install -y libseccomp2
    - docker pull debian:stable-slim
    - docker build -t $REPO .

script:
    - docker run --name "$CONTAINER" $REPO

after_error:
    - docker logs $CONTAINER

after_failure:
    - docker logs $CONTAINER
